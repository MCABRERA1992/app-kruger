<div style="float: right;" class="mt-3">
  <button class="btn btn-primary" type="submit" (click)="logout()">Cerrar Sesion</button>
</div>
<br />
<div class="d-container mt-5">
  <div class="card">
    <div class="card-header">Modulo Empleado</div>
    <div class="card-body">

      <form [formGroup]="formularioEmpleado" novalidate>
        <div class="row">
          <div class="col-sm">
            <div class="input-group input-group-sm mt-1">
              <div class="input-group-prepend">
                <span class="input-group-text">Nombre</span>
              </div>
              <input class="form-control" type="text" formControlName="fbNombre"
                onkeydown="return /[a-z, ]/i.test(event.key)" required>
            </div>
          </div>
          <div class="col-sm">
            <div class="input-group input-group-sm mt-1">
              <div class="input-group-prepend">
                <span class="input-group-text">Apellido</span>
              </div>
              <input class="form-control" type="text" formControlName="fbApellido"
                onkeydown="return /[a-z, ]/i.test(event.key)" required>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-sm">
            <div class="input-group input-group-sm mt-1">
              <div class="input-group-prepend">
                <span class="input-group-text">Cedula</span>
              </div>
              <input class="form-control" type="text" formControlName="fbCedula" [maxLength]="10" required>
            </div>
          </div>
          <div class="col-sm">
            <div class="input-group input-group-sm mt-1">
              <div class="input-group-prepend">
                <span class="input-group-text">Fecha Nacimiento</span>
              </div>
              <input class="form-control" type="date" formControlName="fbFechaNacimiento" required>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-sm">
            <div class="input-group input-group-sm mt-1">
              <div class="input-group-prepend">
                <span class="input-group-text">Correo Electronico</span>
              </div>
              <input class="form-control" type="email" formControlName="fbCorreoElectronico" required>
            </div>
          </div>
          <div class="col-sm">
            <div class="input-group input-group-sm mt-1">
              <div class="input-group-prepend">
                <span class="input-group-text">Dirección de domicilio</span>
              </div>
              <input class="form-control" type="text" formControlName="fbDireccionDomicilio" required>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-sm">
            <div class="input-group input-group-sm mt-1">
              <div class="input-group-prepend">
                <span class="input-group-text">Telefono Móvil</span>
              </div>
              <input class="form-control" type="text" formControlName="fbTelefonoMovil" required>
            </div>
          </div>
          <div class="col-sm">
            <div class="input-group input-group-sm mt-1">
              <div class="input-group-prepend">
                <span class="input-group-text">Estado de Vacunación</span>
              </div>
              <select class="form-control custom" required formControlName="fbEstadoVacuna">
                <option value="">-- Seleccione --</option>
                <option value="Vacunado">Vacunado</option>
                <option value="No Vacunado">No Vacunado</option>
              </select>
            </div>
          </div>
        </div>

        <div class="card-body" *ngIf="formularioEmpleado.get('fbEstadoVacuna')?.value === 'Vacunado'">

          <div class="row">
            <div class="input-group input-group-sm mt-1">
              <div class="input-group-prepend">
                <span class="input-group-text">Tipo de Vacuna</span>
              </div>
              <select class="form-control custom" required formControlName="fbTIpoVacuna">
                <option value="">-- Seleccione --</option>
                <option value="Sputnik">Sputnik</option>
                <option value="AstraZeneca">AstraZeneca</option>
                <option value="Pfizer">Pfizer</option>
                <option value="Jhonson&Jhonson">Jhonson&Jhonson</option>
              </select>
            </div>
          </div>

          <div class="row">
            <div class="input-group input-group-sm mt-1">
              <div class="input-group-prepend">
                <span class="input-group-text">Fecha de Vacunación</span>
              </div>
              <input class="form-control" type="date" formControlName="fbFechaVacuna" required>
            </div>
          </div>

          <div class="row">
            <div class="input-group input-group-sm mt-1">
              <div class="input-group-prepend">
                <span class="input-group-text">Numero de dosis</span>
              </div>
              <input class="form-control" type="text" formControlName="fbNUmeroDosis" required>
            </div>
          </div>
        </div>
        <div style="float: right;" class="mt-3">
          <div class="row">
            <div class="col-sm">
              <button class="btn btn-success btn-sm pull-right" (click)="guardarEmpleado(banderaRol === false ? 'A' : 'I')"
                type="submit">{{banderaRol === false ? 'Actualizar' : 'Guardar'}}</button>
            </div>
          </div>
        </div>
      </form>
    </div>

    <div class="container" *ngIf="banderaRol">
      <h2>Criterios de busqueda</h2>
      <form [formGroup]="formularioEmpleadoFiltro" novalidate>
        <div class="row">
          <div class="col-sm">
            <div class="input-group input-group-sm mt-1">
              <div class="input-group-prepend">
                <span class="input-group-text">Tipo de Vacuna</span>
              </div>
              <select class="form-control custom" required formControlName="fbTIpoVacunaFiltro">
                <option value="">-- Seleccione --</option>
                <option value="Sputnik">Sputnik</option>
                <option value="AstraZeneca">AstraZeneca</option>
                <option value="Pfizer">Pfizer</option>
                <option value="Jhonson&Jhonson">Jhonson&Jhonson</option>
              </select>
            </div>
          </div>

          <div class="col-sm">
            <div class="input-group input-group-sm mt-1">
              <div class="input-group-prepend">
                <span class="input-group-text">Estado de Vacunación</span>
              </div>
              <select class="form-control custom" required formControlName="fbEstadoVacunaFiltro">
                <option value="">-- Seleccione --</option>
                <option value="Vacunado">Vacunado</option>
                <option value="No Vacunado">No Vacunado</option>
              </select>
            </div>
          </div>
          <div class="col-sm"></div>
        </div>
        <div class="row">
          <div class="col-sm">
            <div class="input-group input-group-sm mt-1">
              <div class="input-group-prepend">
                <span class="input-group-text">Fecha Inicio</span>
              </div>
              <input class="form-control" type="date" formControlName="fbFechaInicio" required>
            </div>
          </div>
          <div class="col-sm">
            <div class="input-group input-group-sm mt-1">
              <div class="input-group-prepend">
                <span class="input-group-text">Fecha fin</span>
              </div>
              <input class="form-control" type="date" formControlName="fbFechaFin" required>
            </div>
          </div>
          <div class="col-sm">
            <button class="btn btn-primary btn-sm pull-right" type="submit"
              (click)="onLoadFiltrosEmpleado()">Filtros</button>
          </div>
        </div>
      </form>
      <table class="table table-striped">
        <thead>
          <tr>
            <th scope="col">Cedula</th>
            <th scope="col">Nombres</th>
            <th scope="col">Apellidos</th>
            <th scope="col">Correo Electronico</th>
            <th scope="col">Tipo Vacuna</th>
            <th scope="col">Numero Dosis</th>
            <th scope="col">Acciones</th>
          </tr>
        </thead>
        <tbody *ngFor="let empleado of listEmpleados">
          <tr>
            <td>{{empleado.cedula}}</td>
            <td>{{empleado.nombre}}</td>
            <td>{{empleado.apellidos}}</td>
            <td>{{empleado.email}}</td>
            <td>{{empleado.tipoVacuna}}</td>
            <td>{{empleado.numeroDosis}}</td>
            <td>
              <button type="submit" (click)="eliminarEmpleado(empleado.id)" class="btn btn-outline-danger">
                Eliminar
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

</div>

<ngx-spinner bdColor="rgba(51,51,51,0.64)" name="spinner-capacitacion" size="medium" color="rgba(6,101,128,0.85)"
  [fullScreen]="true" type="ball-atom">
  <p style="font-size: 20px; color: black">Cargando...</p>
</ngx-spinner>
